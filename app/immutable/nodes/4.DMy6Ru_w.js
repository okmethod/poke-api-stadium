import{s as He,D as me,j as A,d as p,o as Et,e as h,a as N,c as _,b,f as C,m as Vt,h as d,k as c,u as z,n as we,p as fe,t as xe,g as $e,v as Ae,l as xt,r as $t,q as Mt}from"../chunks/scheduler.B2rvpzCn.js";import{S as Ue,i as Re,a as E,g as ke,t as I,c as ye,b as W,d as Q,m as X,e as Y}from"../chunks/index.DiE-0pSB.js";import{e as de,u as pt,o as mt}from"../chunks/each.B2VMXnK3.js";import{g as qe}from"../chunks/ProgressBar.svelte_svelte_type_style_lang.CHS4lWan.js";import{I as pe,L as Nt,p as je,g as Ct,b as ht}from"../chunks/numerics.B0rqq2gj.js";import{P as It}from"../chunks/PokeCardCompact.CLj5DnZP.js";function _t(a){let l,t,e,s,r,o,n,f,T,P;return n=new pe({props:{icon:"mdi:close",class:"w-5 h-5"}}),{c(){l=h("div"),t=h("div"),e=h("img"),r=N(),o=h("button"),W(n.$$.fragment),this.h()},l(g){l=_(g,"DIV",{class:!0});var m=b(l);t=_(m,"DIV",{class:!0});var k=b(t);e=_(k,"IMG",{src:!0,alt:!0,class:!0}),r=C(k),o=_(k,"BUTTON",{class:!0});var w=b(o);Q(n.$$.fragment,w),w.forEach(p),k.forEach(p),m.forEach(p),this.h()},h(){Vt(e.src,s=St)||d(e,"src",s),d(e,"alt","type_relations"),d(e,"class","w-96 h-96"),d(o,"class","absolute top-1 right-6 z-10"),d(t,"class","relative"),d(l,"class","min-w-[400px]")},m(g,m){A(g,l,m),c(l,t),c(t,e),c(t,r),c(t,o),X(n,o,null),f=!0,T||(P=z(o,"click",a[2]),T=!0)},p:we,i(g){f||(E(n.$$.fragment,g),f=!0)},o(g){I(n.$$.fragment,g),f=!1},d(g){g&&p(l),Y(n),T=!1,P()}}}function Pt(a){let l,t,e=a[0][0]&&_t(a);return{c(){e&&e.c(),l=me()},l(s){e&&e.l(s),l=me()},m(s,r){e&&e.m(s,r),A(s,l,r),t=!0},p(s,[r]){s[0][0]?e?(e.p(s,r),r&1&&E(e,1)):(e=_t(s),e.c(),E(e,1),e.m(l.parentNode,l)):e&&(ke(),I(e,1,1,()=>{e=null}),ye())},i(s){t||(E(e),t=!0)},o(s){I(e),t=!1},d(s){s&&p(l),e&&e.d(s)}}}const St="https://www.pokemon.co.jp/ex/sun_moon/common/images/fight/161215_01/img_01.png";function Ot(a,l,t){let e,{parent:s}=l;const r=qe();Et(a,r,n=>t(0,e=n));function o(){r.close()}return a.$$set=n=>{"parent"in n&&t(3,s=n.parent)},[e,r,o,s]}class Bt extends Ue{constructor(l){super(),Re(this,l,Ot,Pt,He,{parent:3})}}function gt(a){let l,t,e,s=`<div class="p-4"><h2 class="text-2xl font-bold">ルール</h2> <p class="mt-4">まず ポケモン を 1たい えらぶ。
            <br/>
            つぎに タイプ を どちらか 1つ えらぶ。
            <br/>
            すばやさ が たかい ほうが こうげきする。</p> <ul class="mt-4 list-disc list-inside"><li>ばつぐん なら かち。</li> <li>いまひとつ か こうかなし なら まけ。</li> <li>どちらでもない なら あいこ。</li></ul></div>`,r,o,n,f,T,P;return n=new pe({props:{icon:"mdi:close",class:"w-5 h-5"}}),{c(){l=h("div"),t=h("div"),e=h("div"),e.innerHTML=s,r=N(),o=h("button"),W(n.$$.fragment),this.h()},l(g){l=_(g,"DIV",{class:!0});var m=b(l);t=_(m,"DIV",{class:!0});var k=b(t);e=_(k,"DIV",{class:!0,"data-svelte-h":!0}),fe(e)!=="svelte-1r4440v"&&(e.innerHTML=s),r=C(k),o=_(k,"BUTTON",{class:!0});var w=b(o);Q(n.$$.fragment,w),w.forEach(p),k.forEach(p),m.forEach(p),this.h()},h(){d(e,"class","w-96 h-96 bg-white"),d(o,"class","absolute top-1 right-6 z-10"),d(t,"class","relative"),d(l,"class","min-w-[400px]")},m(g,m){A(g,l,m),c(l,t),c(t,e),c(t,r),c(t,o),X(n,o,null),f=!0,T||(P=z(o,"click",a[2]),T=!0)},p:we,i(g){f||(E(n.$$.fragment,g),f=!0)},o(g){I(n.$$.fragment,g),f=!1},d(g){g&&p(l),Y(n),T=!1,P()}}}function Lt(a){let l,t,e=a[0][0]&&gt(a);return{c(){e&&e.c(),l=me()},l(s){e&&e.l(s),l=me()},m(s,r){e&&e.m(s,r),A(s,l,r),t=!0},p(s,[r]){s[0][0]?e?(e.p(s,r),r&1&&E(e,1)):(e=gt(s),e.c(),E(e,1),e.m(l.parentNode,l)):e&&(ke(),I(e,1,1,()=>{e=null}),ye())},i(s){t||(E(e),t=!0)},o(s){I(e),t=!1},d(s){s&&p(l),e&&e.d(s)}}}function At(a,l,t){let e,{parent:s}=l;const r=qe();Et(a,r,n=>t(0,e=n));function o(){r.close()}return a.$$set=n=>{"parent"in n&&t(3,s=n.parent)},[e,r,o,s]}class jt extends Ue{constructor(l){super(),Re(this,l,At,Lt,He,{parent:3})}}function bt(a,l,t){const e=a.slice();return e[25]=l[t],e}function vt(a,l,t){const e=a.slice();return e[28]=l[t],e[30]=t,e}function kt(a,l,t){const e=a.slice();return e[28]=l[t],e[30]=t,e}function yt(a,l){let t,e,s,r,o;return e=new It({props:{pokeData:l[28].data}}),{key:a,first:null,c(){t=h("div"),W(e.$$.fragment),s=N(),this.h()},l(n){t=_(n,"DIV",{class:!0});var f=b(t);Q(e.$$.fragment,f),s=C(f),f.forEach(p),this.h()},h(){d(t,"class",r="rounded-2xl border-2 "+(l[30]==l[5]?"border-red-500":"border-transparent")),this.first=t},m(n,f){A(n,t,f),X(e,t,null),c(t,s),o=!0},p(n,f){l=n;const T={};f[0]&16&&(T.pokeData=l[28].data),e.$set(T),(!o||f[0]&48&&r!==(r="rounded-2xl border-2 "+(l[30]==l[5]?"border-red-500":"border-transparent")))&&d(t,"class",r)},i(n){o||(E(e.$$.fragment,n),o=!0)},o(n){I(e.$$.fragment,n),o=!1},d(n){n&&p(t),Y(e)}}}function wt(a,l){let t,e,s,r,o,n,f,T;s=new It({props:{pokeData:l[28].data}});function P(){return l[13](l[30])}function g(...m){return l[14](l[30],...m)}return{key:a,first:null,c(){t=h("div"),e=h("button"),W(s.$$.fragment),r=N(),this.h()},l(m){t=_(m,"DIV",{class:!0});var k=b(t);e=_(k,"BUTTON",{type:!0});var w=b(e);Q(s.$$.fragment,w),w.forEach(p),r=C(k),k.forEach(p),this.h()},h(){d(e,"type","button"),d(t,"class",o="rounded-2xl border-2 "+(l[30]==l[0]?"border-red-500":"border-transparent")),this.first=t},m(m,k){A(m,t,k),c(t,e),X(s,e,null),c(t,r),n=!0,f||(T=[z(e,"click",P),z(e,"keydown",g)],f=!0)},p(m,k){l=m;const w={};k[0]&8&&(w.pokeData=l[28].data),s.$set(w),(!n||k[0]&9&&o!==(o="rounded-2xl border-2 "+(l[30]==l[0]?"border-red-500":"border-transparent")))&&d(t,"class",o)},i(m){n||(E(s.$$.fragment,m),n=!0)},o(m){I(s.$$.fragment,m),n=!1},d(m){m&&p(t),Y(s),f=!1,$t(T)}}}function Ft(a){let l,t=de(Fe(a[3][a[0]].data)),e=[];for(let s=0;s<t.length;s+=1)e[s]=Dt(bt(a,t,s));return{c(){for(let s=0;s<e.length;s+=1)e[s].c();l=me()},l(s){for(let r=0;r<e.length;r+=1)e[r].l(s);l=me()},m(s,r){for(let o=0;o<e.length;o+=1)e[o]&&e[o].m(s,r);A(s,l,r)},p(s,r){if(r[0]&1033){t=de(Fe(s[3][s[0]].data));let o;for(o=0;o<t.length;o+=1){const n=bt(s,t,o);e[o]?e[o].p(n,r):(e[o]=Dt(n),e[o].c(),e[o].m(l.parentNode,l))}for(;o<e.length;o+=1)e[o].d(1);e.length=t.length}},i:we,o:we,d(s){s&&p(l),Mt(e,s)}}}function Ht(a){let l,t,e,s,r,o;return e=new pe({props:{icon:"mdi:pokeball",class:"w-5 h-5"}}),{c(){l=h("button"),t=h("div"),W(e.$$.fragment),this.h()},l(n){l=_(n,"BUTTON",{type:!0,class:!0});var f=b(l);t=_(f,"DIV",{class:!0});var T=b(t);Q(e.$$.fragment,T),T.forEach(p),f.forEach(p),this.h()},h(){d(t,"class","w-5 h-5 flex-shrink-0"),d(l,"type","button"),d(l,"class","bg-blue-500 hover:bg-blue-600 px-2 py-1 text-white rounded h-full flex items-center")},m(n,f){A(n,l,f),c(l,t),X(e,t,null),s=!0,r||(o=z(l,"click",a[9]),r=!0)},p:we,i(n){s||(E(e.$$.fragment,n),s=!0)},o(n){I(e.$$.fragment,n),s=!1},d(n){n&&p(l),Y(e),r=!1,o()}}}function Dt(a){let l,t=a[25].jaName+"",e,s,r;function o(){return a[15](a[25])}return{c(){l=h("button"),e=xe(t),this.h()},l(n){l=_(n,"BUTTON",{class:!0});var f=b(l);e=$e(f,t),f.forEach(p),this.h()},h(){d(l,"class","bg-blue-500 hover:bg-blue-600 px-2 py-1 text-white rounded h-full flex items-center")},m(n,f){A(n,l,f),c(l,e),s||(r=z(l,"click",o),s=!0)},p(n,f){a=n,f[0]&9&&t!==(t=a[25].jaName+"")&&xt(e,t)},d(n){n&&p(l),s=!1,r()}}}function Ut(a){let l,t,e='<h1 class="text-2xl font-bold">ポケモンタイプじゃんけん</h1>',s,r,o,n,f,T="ポケモン を よびだす",P,g,m,k,w,B,he,j,_e="",ae,F,H,J,U,ge,G,R,D,y,S,O,oe="",Ie,Z,Ve,ee,V=[],ze=new Map,Me,te,Je="vs",Ne,le,Ce,se,M=[],Ge=new Map,Pe,ie,q,ce,De,Se,Te,x,$,ne,Oe,Ke;w=new pe({props:{icon:"mdi:pokeball",class:"w-5 h-5"}}),U=new pe({props:{icon:"mdi:head-question-outline",class:"w-5 h-5"}}),y=new pe({props:{icon:"mdi:table-question",class:"w-5 h-5"}});let be=de(a[4]);const We=i=>i[28].id;for(let i=0;i<be.length;i+=1){let u=kt(a,be,i),v=We(u);ze.set(v,V[i]=yt(v,u))}let ve=de(a[3]);const Qe=i=>i[28].id;for(let i=0;i<ve.length;i+=1){let u=vt(a,ve,i),v=Qe(u);Ge.set(v,M[i]=wt(v,u))}const Xe=[Ht,Ft],K=[];function Ye(i,u){return u[0]&3&&(Te=null),Te==null&&(Te=!!(i[1]=="select_poke"&&i[8].includes(i[0]))),Te?0:i[1]=="select_type"?1:-1}return~(x=Ye(a,[-1,-1]))&&($=K[x]=Xe[x](a)),{c(){l=h("div"),t=h("div"),t.innerHTML=e,s=N(),r=h("div"),o=h("div"),n=h("div"),f=h("span"),f.textContent=T,P=N(),g=h("form"),m=h("button"),k=h("div"),W(w.$$.fragment),he=N(),j=h("div"),j.innerHTML=_e,ae=N(),F=h("form"),H=h("button"),J=h("div"),W(U.$$.fragment),ge=N(),G=h("form"),R=h("button"),D=h("div"),W(y.$$.fragment),S=N(),O=h("div"),O.innerHTML=oe,Ie=N(),Z=h("div"),Ve=xe(`あいて
      `),ee=h("div");for(let i=0;i<V.length;i+=1)V[i].c();Me=N(),te=h("p"),te.textContent=Je,Ne=N(),le=h("div"),Ce=xe(`あなた
      `),se=h("div");for(let i=0;i<M.length;i+=1)M[i].c();Pe=N(),ie=h("div"),q=h("div"),ce=h("span"),De=xe(a[6]),Se=N(),$&&$.c(),this.h()},l(i){l=_(i,"DIV",{class:!0});var u=b(l);t=_(u,"DIV",{class:!0,"data-svelte-h":!0}),fe(t)!=="svelte-1k6znaj"&&(t.innerHTML=e),s=C(u),r=_(u,"DIV",{class:!0});var v=b(r);o=_(v,"DIV",{class:!0});var Ze=b(o);n=_(Ze,"DIV",{class:!0});var L=b(n);f=_(L,"SPAN",{class:!0,"data-svelte-h":!0}),fe(f)!=="svelte-mp7i3f"&&(f.textContent=T),P=C(L),g=_(L,"FORM",{});var et=b(g);m=_(et,"BUTTON",{type:!0,class:!0});var tt=b(m);k=_(tt,"DIV",{class:!0});var lt=b(k);Q(w.$$.fragment,lt),lt.forEach(p),tt.forEach(p),et.forEach(p),he=C(L),j=_(L,"DIV",{class:!0,"data-svelte-h":!0}),fe(j)!=="svelte-1rtwic7"&&(j.innerHTML=_e),ae=C(L),F=_(L,"FORM",{});var st=b(F);H=_(st,"BUTTON",{type:!0,class:!0});var nt=b(H);J=_(nt,"DIV",{class:!0});var rt=b(J);Q(U.$$.fragment,rt),rt.forEach(p),nt.forEach(p),st.forEach(p),ge=C(L),G=_(L,"FORM",{});var at=b(G);R=_(at,"BUTTON",{type:!0,class:!0});var ot=b(R);D=_(ot,"DIV",{class:!0});var it=b(D);Q(y.$$.fragment,it),it.forEach(p),ot.forEach(p),at.forEach(p),S=C(L),O=_(L,"DIV",{class:!0,"data-svelte-h":!0}),fe(O)!=="svelte-17db9va"&&(O.innerHTML=oe),L.forEach(p),Ze.forEach(p),Ie=C(v),Z=_(v,"DIV",{class:!0});var Be=b(Z);Ve=$e(Be,`あいて
      `),ee=_(Be,"DIV",{class:!0});var ct=b(ee);for(let re=0;re<V.length;re+=1)V[re].l(ct);ct.forEach(p),Be.forEach(p),Me=C(v),te=_(v,"P",{class:!0,"data-svelte-h":!0}),fe(te)!=="svelte-74jz1b"&&(te.textContent=Je),Ne=C(v),le=_(v,"DIV",{class:!0});var Le=b(le);Ce=$e(Le,`あなた
      `),se=_(Le,"DIV",{class:!0});var ut=b(se);for(let re=0;re<M.length;re+=1)M[re].l(ut);ut.forEach(p),Le.forEach(p),Pe=C(v),ie=_(v,"DIV",{class:!0});var ft=b(ie);q=_(ft,"DIV",{class:!0});var Ee=b(q);ce=_(Ee,"SPAN",{class:!0});var dt=b(ce);De=$e(dt,a[6]),dt.forEach(p),Se=C(Ee),$&&$.l(Ee),Ee.forEach(p),ft.forEach(p),v.forEach(p),u.forEach(p),this.h()},h(){d(t,"class","mb-2"),d(f,"class","text-lg"),d(k,"class","w-5 h-5 flex-shrink-0"),d(m,"type","submit"),m.disabled=a[2],d(m,"class",B="px-2 py-1 text-white rounded h-full flex items-center "+(a[2]?"bg-gray-500":"bg-blue-500 hover:bg-blue-600")),d(j,"class","flex-grow"),d(J,"class","w-5 h-5 flex-shrink-0"),d(H,"type","submit"),d(H,"class","px-2 py-1 text-white rounded h-full flex items-center bg-blue-500 hover:bg-blue-600"),d(D,"class","w-5 h-5 flex-shrink-0"),d(R,"type","submit"),d(R,"class","px-2 py-1 text-white rounded h-full flex items-center bg-blue-500 hover:bg-blue-600"),d(O,"class","mr-4"),d(n,"class","flex items-center space-x-3"),d(o,"class","ml-4 space-y-4"),d(ee,"class","flex flex-wrap justify-between p-4 space-x-2 bg-transparent"),d(Z,"class","space-y-5 border bg-white rounded-xl min-h-[200px] min-w-[300px]"),d(te,"class","text-center text-xl"),d(se,"class","flex flex-wrap justify-between p-4 space-x-2 bg-transparent"),d(le,"class","space-y-5 border bg-white rounded-xl min-h-[200px] min-w-[300px]"),d(ce,"class","text-lg"),d(q,"class","flex items-center space-x-3"),d(ie,"class","ml-4 space-y-4"),d(r,"class","space-y-5 min-w-[300px] max-w-[600px]"),d(l,"class","container mx-auto h-full w-9/12 ml-4")},m(i,u){A(i,l,u),c(l,t),c(l,s),c(l,r),c(r,o),c(o,n),c(n,f),c(n,P),c(n,g),c(g,m),c(m,k),X(w,k,null),c(n,he),c(n,j),c(n,ae),c(n,F),c(F,H),c(H,J),X(U,J,null),c(n,ge),c(n,G),c(G,R),c(R,D),X(y,D,null),c(n,S),c(n,O),c(r,Ie),c(r,Z),c(Z,Ve),c(Z,ee);for(let v=0;v<V.length;v+=1)V[v]&&V[v].m(ee,null);c(r,Me),c(r,te),c(r,Ne),c(r,le),c(le,Ce),c(le,se);for(let v=0;v<M.length;v+=1)M[v]&&M[v].m(se,null);c(r,Pe),c(r,ie),c(ie,q),c(q,ce),c(ce,De),c(q,Se),~x&&K[x].m(q,null),ne=!0,Oe||(Ke=[z(g,"submit",Ae(a[7])),z(F,"submit",Ae(a[11])),z(G,"submit",Ae(a[12]))],Oe=!0)},p(i,u){(!ne||u[0]&4)&&(m.disabled=i[2]),(!ne||u[0]&4&&B!==(B="px-2 py-1 text-white rounded h-full flex items-center "+(i[2]?"bg-gray-500":"bg-blue-500 hover:bg-blue-600")))&&d(m,"class",B),u[0]&48&&(be=de(i[4]),ke(),V=pt(V,u,We,1,i,be,ze,ee,mt,yt,null,kt),ye()),u[0]&9&&(ve=de(i[3]),ke(),M=pt(M,u,Qe,1,i,ve,Ge,se,mt,wt,null,vt),ye()),(!ne||u[0]&64)&&xt(De,i[6]);let v=x;x=Ye(i,u),x===v?~x&&K[x].p(i,u):($&&(ke(),I(K[v],1,1,()=>{K[v]=null}),ye()),~x?($=K[x],$?$.p(i,u):($=K[x]=Xe[x](i),$.c()),E($,1),$.m(q,null)):$=null)},i(i){if(!ne){E(w.$$.fragment,i),E(U.$$.fragment,i),E(y.$$.fragment,i);for(let u=0;u<be.length;u+=1)E(V[u]);for(let u=0;u<ve.length;u+=1)E(M[u]);E($),ne=!0}},o(i){I(w.$$.fragment,i),I(U.$$.fragment,i),I(y.$$.fragment,i);for(let u=0;u<V.length;u+=1)I(V[u]);for(let u=0;u<M.length;u+=1)I(M[u]);I($),ne=!1},d(i){i&&p(l),Y(w),Y(U),Y(y);for(let u=0;u<V.length;u+=1)V[u].d();for(let u=0;u<M.length;u+=1)M[u].d();~x&&K[x].d(),Oe=!1,$t(Ke)}}}const ue=3;function Tt(a,l,t){return a.slice(l,t).map((e,s)=>({id:s,data:e}))}function Fe(a){const l=a.type1,t=a.type2;return t?[l,t]:[l]}function Rt(a,l){let t="あいこ";return a.winTo.includes(l.enName)?t="かち":a.loseTo.includes(l.enName)&&(t="まけ"),t}function qt(a,l,t){const e=qe();async function s(D){const y=await ht(fetch,D.toString());return y?y.damage_relations.double_damage_to.map(O=>O.name):[]}async function r(D){const y=await ht(fetch,D.toString());if(!y)return[];const S=y.damage_relations.half_damage_to.map(oe=>oe.name),O=y.damage_relations.no_damage_to.map(oe=>oe.name);return[...S,...O]}let o=!1,n=[],f=[],T=[];async function P(){t(2,o=!0),t(1,w="summonning_poke"),H();try{const D=Array.from({length:Nt},(S,O)=>O+1);n=je(D,ue*2);const y=await Promise.all(n.slice(0,ue*2).map(S=>Ct(fetch,S.toString())));t(3,f=Tt(y,0,ue)),t(4,T=Tt(y,ue,ue*2))}catch{}t(2,o=!1),t(1,w="select_poke")}let g=-1,m=-1;const k=Array.from({length:ue},(D,y)=>y);let w="init",B;function he(){switch(w){case"init":t(6,B="ポケモン を よびだしてね");break;case"summonning_poke":t(6,B="ポケモン を よびだしちゅう...");break;case"select_poke":k.includes(g)?t(6,B=`${f[g].data.jaName} で しょうぶ？`):t(6,B="ポケモン をえらんでね");break;case"select_type":t(6,B="タイプ をえらんでね");break;case"result":t(6,B=ae);break}}function j(){t(1,w="select_type"),t(5,m=je(k,1)[0])}let _e=null,ae;async function F(D){const y={winTo:await s(D.id),loseTo:await r(D.id)},S=Fe(T[m].data);_e=S.length===1?S[0]:S[je([0,1],1)[0]],ae=Rt(y,_e),t(1,w="result")}function H(){t(0,g=-1),t(5,m=-1)}function J(){const y={type:"component",component:{ref:jt,props:{}},backdropClasses:"fixed inset-0 !bg-gray-300/90"};e.trigger(y)}function U(){const y={type:"component",component:{ref:Bt,props:{}},backdropClasses:"fixed inset-0 !bg-gray-300/90"};e.trigger(y)}const ge=D=>t(0,g=D),G=(D,y)=>{(y.key==="Enter"||y.key===" ")&&t(0,g=D)},R=D=>F(D);return a.$$.update=()=>{a.$$.dirty[0]&3&&(w||g)&&he()},[g,w,o,f,T,m,B,P,k,j,F,J,U,ge,G,R]}class Xt extends Ue{constructor(l){super(),Re(this,l,qt,Ut,He,{},null,[-1,-1])}}export{Xt as component};
