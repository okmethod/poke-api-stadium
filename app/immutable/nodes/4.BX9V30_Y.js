import{s as Ce,D as B,j as ee,d as p,o as dt,e as d,a as L,c as m,b as g,f as N,m as ht,h as f,k as r,u as fe,n as mt,p as oe,t as Ie,g as Me,v as Ve,l as _t,r as gt}from"../chunks/scheduler.B2rvpzCn.js";import{S as Pe,i as Se,a as I,g as he,t as C,c as _e,b as Q,d as X,m as Y,e as Z}from"../chunks/index.DiE-0pSB.js";import{e as pe,u as at,o as lt}from"../chunks/each.B2VMXnK3.js";import{g as Le}from"../chunks/ProgressBar.svelte_svelte_type_style_lang.CHS4lWan.js";import{I as de,g as vt,L as bt,b as yt,c as nt}from"../chunks/numerics.fhBheBxY.js";import{P as pt}from"../chunks/PokeCardCompact.xinXf8_L.js";function rt(c){let a,s,e,l,t,u,n,b,x,P;return n=new de({props:{icon:"mdi:close",class:"w-5 h-5"}}),{c(){a=d("div"),s=d("div"),e=d("img"),t=L(),u=d("button"),Q(n.$$.fragment),this.h()},l(h){a=m(h,"DIV",{class:!0});var v=g(a);s=m(v,"DIV",{class:!0});var y=g(s);e=m(y,"IMG",{src:!0,alt:!0,class:!0}),t=N(y),u=m(y,"BUTTON",{class:!0});var k=g(u);X(n.$$.fragment,k),k.forEach(p),y.forEach(p),v.forEach(p),this.h()},h(){ht(e.src,l=$t)||f(e,"src",l),f(e,"alt","type_relations"),f(e,"class","w-96 h-96"),f(u,"class","absolute top-1 right-6 z-10"),f(s,"class","relative"),f(a,"class","min-w-[400px]")},m(h,v){ee(h,a,v),r(a,s),r(s,e),r(s,t),r(s,u),Y(n,u,null),b=!0,x||(P=fe(u,"click",c[2]),x=!0)},p:mt,i(h){b||(I(n.$$.fragment,h),b=!0)},o(h){C(n.$$.fragment,h),b=!1},d(h){h&&p(a),Z(n),x=!1,P()}}}function wt(c){let a,s,e=c[0][0]&&rt(c);return{c(){e&&e.c(),a=B()},l(l){e&&e.l(l),a=B()},m(l,t){e&&e.m(l,t),ee(l,a,t),s=!0},p(l,[t]){l[0][0]?e?(e.p(l,t),t&1&&I(e,1)):(e=rt(l),e.c(),I(e,1),e.m(a.parentNode,a)):e&&(he(),C(e,1,1,()=>{e=null}),_e())},i(l){s||(I(e),s=!0)},o(l){C(e),s=!1},d(l){l&&p(a),e&&e.d(l)}}}const $t="https://www.pokemon.co.jp/ex/sun_moon/common/images/fight/161215_01/img_01.png";function xt(c,a,s){let e,{parent:l}=a;const t=Le();dt(c,t,n=>s(0,e=n));function u(){t.close()}return c.$$set=n=>{"parent"in n&&s(3,l=n.parent)},[e,t,u,l]}class kt extends Pe{constructor(a){super(),Se(this,a,xt,wt,Ce,{parent:3})}}function ot(c){let a,s,e,l=`<div class="p-4"><h2 class="text-2xl font-bold">ルール</h2> <p class="mt-4">まず ポケモン をえらぶ。
            <br/>
            つぎに タイプ を えらぶ。
            <br/>
            すばやさ が たかい ほうが こうげきする。</p> <ul class="mt-4 list-disc list-inside"><li>ばつぐん なら かち。</li> <li>いまひとつ か こうかなし なら まけ。</li> <li>どちらでもない なら あいこ。</li></ul> <p class="mt-4">3 たい の かちまけ で しょうぶ が きまる。</p></div>`,t,u,n,b,x,P;return n=new de({props:{icon:"mdi:close",class:"w-5 h-5"}}),{c(){a=d("div"),s=d("div"),e=d("div"),e.innerHTML=l,t=L(),u=d("button"),Q(n.$$.fragment),this.h()},l(h){a=m(h,"DIV",{class:!0});var v=g(a);s=m(v,"DIV",{class:!0});var y=g(s);e=m(y,"DIV",{class:!0,"data-svelte-h":!0}),oe(e)!=="svelte-1r8fe08"&&(e.innerHTML=l),t=N(y),u=m(y,"BUTTON",{class:!0});var k=g(u);X(n.$$.fragment,k),k.forEach(p),y.forEach(p),v.forEach(p),this.h()},h(){f(e,"class","w-96 h-96 bg-white"),f(u,"class","absolute top-1 right-6 z-10"),f(s,"class","relative"),f(a,"class","min-w-[400px]")},m(h,v){ee(h,a,v),r(a,s),r(s,e),r(s,t),r(s,u),Y(n,u,null),b=!0,x||(P=fe(u,"click",c[2]),x=!0)},p:mt,i(h){b||(I(n.$$.fragment,h),b=!0)},o(h){C(n.$$.fragment,h),b=!1},d(h){h&&p(a),Z(n),x=!1,P()}}}function Dt(c){let a,s,e=c[0][0]&&ot(c);return{c(){e&&e.c(),a=B()},l(l){e&&e.l(l),a=B()},m(l,t){e&&e.m(l,t),ee(l,a,t),s=!0},p(l,[t]){l[0][0]?e?(e.p(l,t),t&1&&I(e,1)):(e=ot(l),e.c(),I(e,1),e.m(a.parentNode,a)):e&&(he(),C(e,1,1,()=>{e=null}),_e())},i(l){s||(I(e),s=!0)},o(l){C(e),s=!1},d(l){l&&p(a),e&&e.d(l)}}}function Tt(c,a,s){let e,{parent:l}=a;const t=Le();dt(c,t,n=>s(0,e=n));function u(){t.close()}return c.$$set=n=>{"parent"in n&&s(3,l=n.parent)},[e,t,u,l]}class Et extends Pe{constructor(a){super(),Se(this,a,Tt,Dt,Ce,{parent:3})}}function it(c,a,s){const e=c.slice();return e[15]=a[s],e}function ct(c,a,s){const e=c.slice();return e[15]=a[s],e}function ut(c,a){let s,e,l;return e=new pt({props:{pokeData:a[15].data}}),{key:c,first:null,c(){s=B(),Q(e.$$.fragment),this.h()},l(t){s=B(),X(e.$$.fragment,t),this.h()},h(){this.first=s},m(t,u){ee(t,s,u),Y(e,t,u),l=!0},p(t,u){a=t;const n={};u&4&&(n.pokeData=a[15].data),e.$set(n)},i(t){l||(I(e.$$.fragment,t),l=!0)},o(t){C(e.$$.fragment,t),l=!1},d(t){t&&p(s),Z(e,t)}}}function ft(c,a){let s,e,l;return e=new pt({props:{pokeData:a[15].data}}),{key:c,first:null,c(){s=B(),Q(e.$$.fragment),this.h()},l(t){s=B(),X(e.$$.fragment,t),this.h()},h(){this.first=s},m(t,u){ee(t,s,u),Y(e,t,u),l=!0},p(t,u){a=t;const n={};u&1&&(n.pokeData=a[15].data),e.$set(n)},i(t){l||(I(e.$$.fragment,t),l=!0)},o(t){C(e.$$.fragment,t),l=!1},d(t){t&&p(s),Z(e,t)}}}function It(c){let a,s,e='<h1 class="text-2xl font-bold">ポケモンタイプじゃんけん</h1>',l,t,u,n,b,x="ポケモン を よびだす",P,h,v,y,k,te,ie,H,D="",w,M,V,$,O,ge,se,R,ae,A,ve,F,Ne="",be,j,ye,U,T=[],He=new Map,we,q,Oe="vs",$e,z,xe,G,E=[],Be=new Map,ke,le,ne,re,me,J,De,Re;k=new de({props:{icon:"mdi:pokemon-go",class:"w-5 h-5"}}),O=new de({props:{icon:"mdi:head-question-outline",class:"w-5 h-5"}}),A=new de({props:{icon:"mdi:table-question",class:"w-5 h-5"}});let ce=pe(c[2]);const Ae=i=>i[15].id;for(let i=0;i<ce.length;i+=1){let o=ct(c,ce,i),_=Ae(o);He.set(_,T[i]=ut(_,o))}let ue=pe(c[0]);const Fe=i=>i[15].id;for(let i=0;i<ue.length;i+=1){let o=it(c,ue,i),_=Fe(o);Be.set(_,E[i]=ft(_,o))}return{c(){a=d("div"),s=d("div"),s.innerHTML=e,l=L(),t=d("div"),u=d("div"),n=d("div"),b=d("span"),b.textContent=x,P=L(),h=d("form"),v=d("button"),y=d("div"),Q(k.$$.fragment),ie=L(),H=d("div"),H.innerHTML=D,w=L(),M=d("form"),V=d("button"),$=d("div"),Q(O.$$.fragment),ge=L(),se=d("form"),R=d("button"),ae=d("div"),Q(A.$$.fragment),ve=L(),F=d("div"),F.innerHTML=Ne,be=L(),j=d("div"),ye=Ie(`あいて
      `),U=d("div");for(let i=0;i<T.length;i+=1)T[i].c();we=L(),q=d("p"),q.textContent=Oe,$e=L(),z=d("div"),xe=Ie(`あなた
      `),G=d("div");for(let i=0;i<E.length;i+=1)E[i].c();ke=L(),le=d("div"),ne=d("div"),re=d("span"),me=Ie(c[3]),this.h()},l(i){a=m(i,"DIV",{class:!0});var o=g(a);s=m(o,"DIV",{class:!0,"data-svelte-h":!0}),oe(s)!=="svelte-1k6znaj"&&(s.innerHTML=e),l=N(o),t=m(o,"DIV",{class:!0});var _=g(t);u=m(_,"DIV",{class:!0});var je=g(u);n=m(je,"DIV",{class:!0});var S=g(n);b=m(S,"SPAN",{class:!0,"data-svelte-h":!0}),oe(b)!=="svelte-mp7i3f"&&(b.textContent=x),P=N(S),h=m(S,"FORM",{});var Ue=g(h);v=m(Ue,"BUTTON",{type:!0,class:!0});var qe=g(v);y=m(qe,"DIV",{class:!0});var ze=g(y);X(k.$$.fragment,ze),ze.forEach(p),qe.forEach(p),Ue.forEach(p),ie=N(S),H=m(S,"DIV",{class:!0,"data-svelte-h":!0}),oe(H)!=="svelte-1rtwic7"&&(H.innerHTML=D),w=N(S),M=m(S,"FORM",{});var Ge=g(M);V=m(Ge,"BUTTON",{type:!0,class:!0});var Je=g(V);$=m(Je,"DIV",{class:!0});var Ke=g($);X(O.$$.fragment,Ke),Ke.forEach(p),Je.forEach(p),Ge.forEach(p),ge=N(S),se=m(S,"FORM",{});var We=g(se);R=m(We,"BUTTON",{type:!0,class:!0});var Qe=g(R);ae=m(Qe,"DIV",{class:!0});var Xe=g(ae);X(A.$$.fragment,Xe),Xe.forEach(p),Qe.forEach(p),We.forEach(p),ve=N(S),F=m(S,"DIV",{class:!0,"data-svelte-h":!0}),oe(F)!=="svelte-17db9va"&&(F.innerHTML=Ne),S.forEach(p),je.forEach(p),be=N(_),j=m(_,"DIV",{class:!0});var Te=g(j);ye=Me(Te,`あいて
      `),U=m(Te,"DIV",{class:!0});var Ye=g(U);for(let K=0;K<T.length;K+=1)T[K].l(Ye);Ye.forEach(p),Te.forEach(p),we=N(_),q=m(_,"P",{class:!0,"data-svelte-h":!0}),oe(q)!=="svelte-74jz1b"&&(q.textContent=Oe),$e=N(_),z=m(_,"DIV",{class:!0});var Ee=g(z);xe=Me(Ee,`あなた
      `),G=m(Ee,"DIV",{class:!0});var Ze=g(G);for(let K=0;K<E.length;K+=1)E[K].l(Ze);Ze.forEach(p),Ee.forEach(p),ke=N(_),le=m(_,"DIV",{class:!0});var et=g(le);ne=m(et,"DIV",{class:!0});var tt=g(ne);re=m(tt,"SPAN",{class:!0});var st=g(re);me=Me(st,c[3]),st.forEach(p),tt.forEach(p),et.forEach(p),_.forEach(p),o.forEach(p),this.h()},h(){f(s,"class","mb-2"),f(b,"class","text-lg"),f(y,"class","w-5 h-5 flex-shrink-0"),f(v,"type","submit"),v.disabled=c[1],f(v,"class",te="px-2 py-1 text-white rounded h-full flex items-center "+(c[1]?"bg-gray-500":"bg-blue-500 hover:bg-blue-600")),f(H,"class","flex-grow"),f($,"class","w-5 h-5 flex-shrink-0"),f(V,"type","submit"),f(V,"class","px-2 py-1 text-white rounded h-full flex items-center bg-blue-500 hover:bg-blue-600"),f(ae,"class","w-5 h-5 flex-shrink-0"),f(R,"type","submit"),f(R,"class","px-2 py-1 text-white rounded h-full flex items-center bg-blue-500 hover:bg-blue-600"),f(F,"class","mr-4"),f(n,"class","flex items-center space-x-3"),f(u,"class","ml-4 space-y-4"),f(U,"class","flex flex-wrap justify-between p-4 space-x-2 bg-transparent"),f(j,"class","space-y-5 border bg-white rounded-xl min-h-[200px] min-w-[300px]"),f(q,"class","text-center text-xl"),f(G,"class","flex flex-wrap justify-between p-4 space-x-2 bg-transparent"),f(z,"class","space-y-5 border bg-white rounded-xl min-h-[200px] min-w-[300px]"),f(re,"class","text-lg"),f(ne,"class","flex items-center space-x-3"),f(le,"class","ml-4 space-y-4"),f(t,"class","space-y-5 min-w-[300px] max-w-[600px]"),f(a,"class","container mx-auto h-full w-9/12 ml-4")},m(i,o){ee(i,a,o),r(a,s),r(a,l),r(a,t),r(t,u),r(u,n),r(n,b),r(n,P),r(n,h),r(h,v),r(v,y),Y(k,y,null),r(n,ie),r(n,H),r(n,w),r(n,M),r(M,V),r(V,$),Y(O,$,null),r(n,ge),r(n,se),r(se,R),r(R,ae),Y(A,ae,null),r(n,ve),r(n,F),r(t,be),r(t,j),r(j,ye),r(j,U);for(let _=0;_<T.length;_+=1)T[_]&&T[_].m(U,null);r(t,we),r(t,q),r(t,$e),r(t,z),r(z,xe),r(z,G);for(let _=0;_<E.length;_+=1)E[_]&&E[_].m(G,null);r(t,ke),r(t,le),r(le,ne),r(ne,re),r(re,me),J=!0,De||(Re=[fe(h,"submit",Ve(c[4])),fe(M,"submit",Ve(c[5])),fe(se,"submit",Ve(c[6]))],De=!0)},p(i,[o]){(!J||o&2)&&(v.disabled=i[1]),(!J||o&2&&te!==(te="px-2 py-1 text-white rounded h-full flex items-center "+(i[1]?"bg-gray-500":"bg-blue-500 hover:bg-blue-600")))&&f(v,"class",te),o&4&&(ce=pe(i[2]),he(),T=at(T,o,Ae,1,i,ce,He,U,lt,ut,null,ct),_e()),o&1&&(ue=pe(i[0]),he(),E=at(E,o,Fe,1,i,ue,Be,G,lt,ft,null,it),_e()),(!J||o&8)&&_t(me,i[3])},i(i){if(!J){I(k.$$.fragment,i),I(O.$$.fragment,i),I(A.$$.fragment,i);for(let o=0;o<ce.length;o+=1)I(T[o]);for(let o=0;o<ue.length;o+=1)I(E[o]);J=!0}},o(i){C(k.$$.fragment,i),C(O.$$.fragment,i),C(A.$$.fragment,i);for(let o=0;o<T.length;o+=1)C(T[o]);for(let o=0;o<E.length;o+=1)C(E[o]);J=!1},d(i){i&&p(a),Z(k),Z(O),Z(A);for(let o=0;o<T.length;o+=1)T[o].d();for(let o=0;o<E.length;o+=1)E[o].d();De=!1,gt(Re)}}}const W=3;function Mt(c,a,s){const e=Le();async function l(D){const w=await nt(fetch,D.toString());return w?w.damage_relations.double_damage_to.map(V=>V.name):[]}async function t(D){const w=await nt(fetch,D.toString());if(!w)return[];const M=w.damage_relations.half_damage_to.map($=>$.name),V=w.damage_relations.no_damage_to.map($=>$.name);return[...M,...V]}async function u(D,w,M){const V=D.slice(w,M).map(async($,O)=>({id:O,data:$,type1Relation:{winTo:await l($.type1.id),loseTo:await t($.type1.id)},type2Relation:$.type2!==null?{winTo:await l($.type2.id),loseTo:await t($.type2.id)}:null}));return Promise.all(V)}let n=!1,b=[],x=[],P=[];async function h(){s(1,n=!0),H();try{b=vt(1,bt,W*2);const D=await Promise.all(b.slice(0,W*2).map(w=>yt(fetch,w.toString())));s(0,x=await u(D,0,W)),s(2,P=await u(D,W,W*2))}catch{}s(1,n=!1)}let v,y="ポケモン を よびだしてね";function k(){if(x.length==0){s(3,y="ポケモン を よびだしてね");return}const D=v.filter(M=>M==="standby").length,w=W-D+1;s(3,y=`${w} たいめ の ポケモン をえらんでね`)}function te(){const w={type:"component",component:{ref:Et,props:{}},backdropClasses:"fixed inset-0 !bg-gray-300/90"};e.trigger(w)}function ie(){const w={type:"component",component:{ref:kt,props:{}},backdropClasses:"fixed inset-0 !bg-gray-300/90"};e.trigger(w)}function H(){s(7,v=Array(W).fill("standby"))}return c.$$.update=()=>{c.$$.dirty&129&&(v||x)&&k()},[x,n,P,y,h,te,ie,v]}class Ht extends Pe{constructor(a){super(),Se(this,a,Mt,It,Ce,{})}}export{Ht as component};
