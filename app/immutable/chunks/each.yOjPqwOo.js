import{t,a as e}from"./index.CSk_aVci.js";import{v as n}from"./scheduler.BlVzsFL4.js";function s(t){return void 0!==(null==t?void 0:t.length)?t:Array.from(t)}function o(e,n){t(e,1,1,(()=>{n.delete(e.key)}))}function a(t,e){t.f(),o(t,e)}function r(t,s,o,a,r,f,c,i,h,u,d,l){let k=t.length,m=f.length,p=k;const y={};for(;p--;)y[t[p].key]=p;const g=[],w=new Map,v=new Map,M=[];for(p=m;p--;){const t=l(r,f,p),e=o(t);let n=c.get(e);n?M.push((()=>n.p(t,s))):(n=u(e,t),n.c()),w.set(e,g[p]=n),e in y&&v.set(e,Math.abs(p-y[e]))}const j=new Set,x=new Set;function S(t){e(t,1),t.m(i,d),c.set(t.key,t),d=t.first,m--}for(;k&&m;){const e=g[m-1],n=t[k-1],s=e.key,o=n.key;e===n?(d=e.first,k--,m--):w.has(o)?!c.has(s)||j.has(s)?S(e):x.has(o)?k--:v.get(s)>v.get(o)?(x.add(s),S(e)):(j.add(o),k--):(h(n,c),k--)}for(;k--;){const e=t[k];w.has(e.key)||h(e,c)}for(;m;)S(g[m-1]);return n(M),g}export{s as e,a as f,o,r as u};
