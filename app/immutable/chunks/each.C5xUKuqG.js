import{t,a as e}from"./index.BEzkr-BZ.js";import{w as n}from"./scheduler.CTGz0PnT.js";function s(t){return void 0!==(null==t?void 0:t.length)?t:Array.from(t)}function o(e,n){t(e,1,1,(()=>{n.delete(e.key)}))}function a(t,e){t.f(),o(t,e)}function r(t,s,o,a,r,f,i,c,h,u,d,l){let p=t.length,y=f.length,g=p;const k={};for(;g--;)k[t[g].key]=g;const m=[],w=new Map,j=new Map,M=[];for(g=y;g--;){const t=l(r,f,g),e=o(t);let n=i.get(e);n?M.push((()=>n.p(t,s))):(n=u(e,t),n.c()),w.set(e,m[g]=n),e in k&&j.set(e,Math.abs(g-k[e]))}const v=new Set,x=new Set;function S(t){e(t,1),t.m(c,d),i.set(t.key,t),d=t.first,y--}for(;p&&y;){const e=m[y-1],n=t[p-1],s=e.key,o=n.key;e===n?(d=e.first,p--,y--):w.has(o)?!i.has(s)||v.has(s)?S(e):x.has(o)?p--:j.get(s)>j.get(o)?(x.add(s),S(e)):(v.add(o),p--):(h(n,i),p--)}for(;p--;){const e=t[p];w.has(e.key)||h(e,i)}for(;y;)S(m[y-1]);return n(M),m}export{s as e,a as f,o,r as u};
