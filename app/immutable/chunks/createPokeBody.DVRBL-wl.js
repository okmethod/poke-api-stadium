function t(){return Matter.Engine.create({enableSleeping:!0,positionIterations:6,velocityIterations:4,constraintIterations:6})}function e(){return Matter.Runner.create()}function n(t,e){return Matter.Render.create({element:e,engine:t,options:{width:e.clientWidth,height:e.clientHeight,pixelRatio:1,background:"transparent",hasBounds:!1,wireframes:!1,showSleeping:!1}})}function r(t,e){const n=Matter.Mouse.create(e.canvas);e.mouse=n;return Matter.MouseConstraint.create(t,{mouse:n,constraint:{stiffness:.2,damping:0,length:0,render:{visible:!1,lineWidth:2,strokeStyle:"#00ff00"}}})}async function o(t){const e=t.clientWidth,n=t.clientHeight;const r=(o=e,i=n,a=2e3,c=0,[{x:o/2-c,y:-a/2,w:o+2*c,h:a},{x:o/2-c,y:i+a/2,w:o+2*c,h:a},{x:-a/2,y:i/2-c,w:a,h:i+2*c},{x:o+a/2,y:i/2-c,w:a,h:i+2*c}]).map((t=>Matter.Bodies.rectangle(t.x,t.y,t.w,t.h,{isStatic:!0,render:{visible:!1}})));var o,i,a,c;return Matter.Composite.add(Matter.Composite.create(),r)}function i(t,e,n,r){return{pointerdown:function(){r.isHolding=!0,Matter.World.add(t,e)},pointerup:function(){r.isHolding=!1,Matter.World.remove(t,e)},pointerleave:function(){r.isHolding=!1,e.constraint.bodyA=null,e.constraint.bodyB=null,e.mouse.position={x:-1,y:-1},Matter.World.remove(t,e)},pointermove:function(r){const o=n.getBoundingClientRect();(r.clientX<o.left||r.clientX>o.right||r.clientY<o.top||r.clientY>o.bottom)&&Matter.World.remove(t,e)}}}async function a(t){const e=await async function(t){return new Promise(((e,n)=>{const r=new Image;r.crossOrigin="Anonymous",r.src=t,r.onload=()=>e(r),r.onerror=t=>n(t)}))}(t),n=function(t){const{width:e,height:n}=t,r=document.createElement("canvas");r.width=e,r.height=n;const o=r.getContext("2d");if(!o)throw new Error("Canvas context could not be obtained");o.drawImage(t,0,0,e,n);return o.getImageData(0,0,e,n).data}(e),r=function(t,e,n){const r=[],o=new Set;function i(n,r){return 0===t[4*(r*e+n)+3]}function a(t,e){const n=`${t},${e}`;o.has(n)||(r.push({x:t,y:e}),o.add(n))}for(let c=0;c<n;c++)for(let t=0;t<e;t++)i(t,c)||((0===c||i(t,c-1))&&a(t,c),(c===n-1||i(t,c+1))&&a(t,c),(0===t||i(t-1,c))&&a(t,c),(t===e-1||i(t+1,c))&&a(t,c));return r}(n,e.width,e.height),o=function(t){const e=t.reduce(((t,e)=>(t.x+=e.x,t.y+=e.y,t)),{x:0,y:0});e.x/=t.length,e.y/=t.length;const n=t.map((t=>{const n=Math.atan2(t.y-e.y,t.x-e.x);return{...t,angle:n}}));return n.sort(((t,e)=>t.angle-e.angle)),n.map((t=>({x:t.x,y:t.y})))}(r);return o}async function c(t,e,n){const r=await a(t);let o=1,i=r;if(e){const t=Matter.Bounds.create(r),n=t.max.x-t.min.x,a=t.max.y-t.min.y;o=e/Math.max(n,a);i=function(t,e){const n=t.reduce(((t,e)=>t+e.x),0)/t.length,r=t.reduce(((t,e)=>t+e.y),0)/t.length;return t.map((t=>({x:n+(t.x-n)*e,y:r+(t.y-r)*e})))}(r,.9*o)}return Matter.Bodies.fromVertices(n.x,n.y,[i],{restitution:.2,friction:.1,render:{sprite:{texture:t,xScale:o,yScale:o}}})}export{e as a,n as b,r as c,o as d,i as e,c as f,t as i};
