import{c as l}from"./type.BpnlySAn.js";function o(){return{credentials:"same-origin"}}async function u(e,t,a){try{const s=await e(t,a);if(!s.ok)throw console.error("API response:",s.status),new Error(`Failed to fetch: ${a.method} ${t}`);return s}catch(s){throw console.error("API error:",s),new Error(`Failed to fetch: ${a.method} ${t}`)}}async function p(e,t){const a=`https://pokeapi.co/api/v2/pokemon/${t}`;return y(e,a)}async function y(e,t){const s={...o(),method:"GET"};return await(await u(e,t,s)).json()}async function g(e,t){const s={...o(),method:"GET"};return await(await u(e,t,s)).json()}async function _(e,t){const a=`https://pokeapi.co/api/v2/type/${t}`;return c(e,a)}async function c(e,t){const s={...o(),method:"GET"};return await(await u(e,t,s)).json()}function f(e){let t=[];if(typeof e=="object"&&e!==null)for(const a in e){const s=e[a];typeof s=="string"?t.push(s):typeof s=="object"&&s!==null&&(t=t.concat(f(s)))}return t}function h(e){let t=f(e);return e.front_default&&(t=[e.front_default,...t.filter(a=>a!==e.front_default)]),t}function m(e){const t={};return e.forEach(a=>{switch(a.stat.name){case"hp":t.hp=a.base_stat;break;case"attack":t.attack=a.base_stat;break;case"defense":t.defense=a.base_stat;break;case"special-attack":t.specialAttack=a.base_stat;break;case"special-defense":t.specialDefense=a.base_stat;break;case"speed":t.speed=a.base_stat;break}}),t}function d(e,t,a,s){var n,i;return{id:e.id,enName:e.species.name,jaName:((n=t.names.find(r=>r.language.name==="ja"))==null?void 0:n.name)??"???",imageUrl:e.sprites.front_default,gifUrl:e.sprites.other.showdown.front_default,imageUrlArray:h(e.sprites),jaGenus:((i=t.genera.find(r=>r.language.name==="ja"))==null?void 0:i.genus)??null,type1:l(a),type2:s?l(s):null,height:e.height,weight:e.weight,stats:m(e.stats),isDefault:e.is_default,varieties:t.varieties.filter(r=>r.pokemon.name!==e.species.name).map(r=>r.pokemon.name),generation:t.generation.name}}function b(e){var t;return{jaName:e.jaName,jaGenus:e.jaGenus,imageUrl:e.imageUrl,gifUrl:e.gifUrl,type1Name:e.type1.enName,type2Name:((t=e.type2)==null?void 0:t.enName)??null,height:e.height,weight:e.weight,stats:e.stats}}async function I(e,t){const a=await p(e,t),s=await g(e,a.species.url),n=await c(e,a.types[0].type.url),i=a.types[1]?await c(e,a.types[1].type.url):null;return d(a,s,n,i)}export{b as c,_ as g,I as m};
